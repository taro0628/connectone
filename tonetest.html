<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>tonetest</title>
    <link href="static/css/reset.css" rel="stylesheet" type="text/css">
    <link href="static/css/index.css" rel="stylesheet" type="text/css">
</head>
<body>

    <script src="static/js/jquery-2.2.0.min.js" charset="utf-8"></script>
    <script src="static/js/recipe.js" charset="utf-8"></script>
    <script src="static/js/audio.js" charset="utf-8"></script>
    <script>
        var AudioContext = window.AudioContext || window.webkitAudioContext;
        var ctx = new AudioContext();
        var noteLength = 0.3;
        var bassdrum = new Synth(ctx, bassdrum);
        var snare = new Synth(ctx, snare);
        var highhat = new Synth(ctx, highhat);
        var tone1 = new Synth(ctx, tone1);
        var tone2 = new Synth(ctx, tone2);
        var tone3= new Synth(ctx, tone3);
        $(function(){
            var note = bassdrum;

            $(window).on('keydown', function(event){
                var now = ctx.currentTime;

                if(event.keyCode == 49){//1キーでbassdrum
                    note = bassdrum;
                }else if(event.keyCode == 50){//2キーでsnare
                    note = snare;
                }else if(event.keyCode == 51){//3キーでhighhat
                    note = highhat;
                }else if(event.keyCode == 52){//4キーでtone1
                    note = tone1;
                }else if(event.keyCode == 53){//5キーでtone2
                    note = tone2;
                }else if(event.keyCode == 54){//6キーでtone3
                    note = tone3;
                }

                if(event.keyCode == 65){//Aキーでド
                    note.noteOn(12, now);
                }else if(event.keyCode == 83){//Sキーでレ
                    note.noteOn(14, now);
                }else if(event.keyCode == 68){//Dキーでミ
                    note.noteOn(16, now);
                }else if(event.keyCode == 70){//Fキーでファ
                    note.noteOn(17, now);
                }else if(event.keyCode == 71){//Gキーでソ
                    note.noteOn(19, now);
                }else if(event.keyCode == 72){//Hキーでラ
                    note.noteOn(21, now);
                }else if(event.keyCode == 74){//Jキーでシ
                    note.noteOn(23, now);
                }else if(event.keyCode == 75){//Kキーでド
                    note.noteOn(24, now);
                }
            });
            $(window).on('keyup', function(event){
                var now = ctx.currentTime;

                if(event.keyCode == 65){//Aキーでド
                    note.noteOff(now);
                }else if(event.keyCode == 83){//Sキーでレ
                    note.noteOff(now);
                }else if(event.keyCode == 68){//Dキーでミ
                    note.noteOff(now);
                }else if(event.keyCode == 70){//Fキーでファ
                    note.noteOff(now);
                }else if(event.keyCode == 71){//Gキーでソ
                    note.noteOff(now);
                }else if(event.keyCode == 72){//Hキーでラ
                    note.noteOff(now);
                }else if(event.keyCode == 74){//Jキーでシ
                    note.noteOff(now);
                }else if(event.keyCode == 75){//Kキーでド
                    note.noteOff(now);
                }
            });
        });
    </script>
</body>
</html>
